{% load static %}
{% load humanize %}
{% include "header.html" %}
<br>
<section class="description">

    <div class="echo">
         {% if messages %}
<ul class="messages">
    {% for message in messages %}
    {% if message.tags == 'error' %}
      <div class="alert alert-danger mb-2 mt-2">
                <p class="mb-0">{{ message }}</p>
            </div>
    {% else %}
    <div class="success success-danger mb-2 mt-2">
                <p class="mb-0">{{ message }}</p>
            </div>
    {% endif %}
    {% endfor %}
</ul>
{% endif %}
      <div class="container">
      <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2">
        <div class="col">

        <div class="card shadow" style="width: 50rem; margin-left: 7rem; height: 53">
            <div id="carouselExampleIndicators" class="carousel slide" data-bs-touch="false" data-bs-interval="false">
              <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
              </div>
{% for i in images %}

                  {% if i.active %}
              <div class="carousel-inner" style="width: 35 rem; height: 40rem">

                  {% for i in images %}

                  {% if i.active %}
                <div class="carousel-item active">
                  <img src="{{ i.image.url }}" class="d-block w-100" alt="photo" style="width: 35 rem; height: 40rem">
                </div>

                {% else %}
                <div class="carousel-item">
                  <img src="{{ i.image.url }}"  class="d-block w-100" alt="photo" style="width: 35 rem; height: 40rem">
                </div>{% endif %}
                 {% endfor %}
              </div>{% endif %}
                 {% endfor %}

              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
            <div class="card-body obj">
              <h4 class="card-title"><b>Описание: </b></h4>
              <p class="card-text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit; max-width: 100px;">{{ item.description }}</font></p>
            </div>
            <div class="osn-c">
            <div class="container">
                <div class="card" style="display: flex; flex-direction: row; justify-content: flex-start">
                    <div class="card-body">
                        <h5 class="card-title">{{ item.total_surface }} м²</h5>
                        <h6 class="card-subtitle" style="vertical-align: inherit">Общая площадь </h6>
                    </div>
                    {% if item.floor %}
                    <div class="card-body">
                        <h5 class="card-title">{{item.floor}}</h5>
                        <h6 class="card-subtitle" style="vertical-align: inherit">Этаж</h6>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.price|intcomma }} р.</h5>
                        <h6 class="card-subtitle" style="vertical-align: inherit">Стоимость</h6>
                    </div>
                </div>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

</section>

<br>

<section class="table-descript">
    <div class="echo">
        <div class="container">
            <div class="card" style="width: 50rem; margin-left: 7rem">
                <div class="card-body">
                    <h3 class="card-title" style="margin-bottom: 3rem">Общая информация</h3>
                    <table class="table">
                        <tbody>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Регион</th>
                                </div>
                                    <td>{{item.region}}</td>
                            </tr>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Город</th>
                                </div>
                                    <td>{{item.city}}</td>
                            </tr>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Улица</th>
                                </div>
                                    <td>{{item.street}}</td>
                            </tr>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Стоимость</th>
                                </div>
                                    <td>{{ item.price|intcomma }} р.</td>
                            </tr>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row"> Возможность обмена</th>
                                </div>
                                {% if item.trade %}
                                    <td>Да</td>
                                {% else %}
                                <td>Нет</td>
                                {% endif %}
                            </tr>
                        </tbody>
                    </table>
                    <br>
                </div>

            </div>
        </div>
    </div>

</section>

<br>

<section class="table-descript-2">
    <div class="echo">
        <div class="container">
            <div class="card" style="width: 50rem; margin-left: 7rem">
                <div class="card-body">
                    <h3 class="card-title" style="margin-bottom: 3rem">Подробная информация</h3>
                    <table class="table">
                        <tbody>
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Тип</th>
                                </div>
                                   {% include 'handlers/validation_on_type.html' %}
                            </tr>
                            {% if item.material %}
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Материал стен</th>
                                </div>
                                    <td>{{item.material}}</td>
                            </tr>
                            {% endif %}
                            {% if item.floor %}
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Этаж</th>
                                </div>
                                    <td>{{item.floor}}</td>
                            </tr>
                            {% endif %}
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row"> Площадь общая</th>
                                </div>
                                    <td>{{item.total_surface}} м²</td>
                            </tr>
                            {% if item.total_floors %}
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Всего этажей</th>
                                </div>
                                    <td>{{ item.total_floors }}</td>
                            </tr>
                            {% endif %}
                            {% if item.livin_surface %}
                            <tr>
                                <div class="card-subtitle">
                                    <th scope="row">Жилая площадь</th>
                                </div>
                                    <td>{{item.livin_surface}} м²</td>
                            </tr>
                        {% endif %}
                        </tbody>
                    </table>
                     <div class="card" style="display: flex; flex-direction: row; justify-content: start">
<form method="POST" action="{% url 'extended_item' item.id %}">
    {% csrf_token %}
    <input type="submit" name="action" value="Вернуться к списку объявлений">
    <input type="submit" name="action" value="Опубликовать">
    <input type="submit" name="action" value="Удалить объявление">
    <input type="submit" name="action" value="Заблокировать пользователя">
<a href="{% url 'extended_item_list' item.region.id %}">Вернуться к списку объявлений</a>
</form>



                        </div>
                </div>

                </div>

                </div>
            </div>
        </div>

    </div>

</section>
<br>

{%include "footer.html"%}
